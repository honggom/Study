## 상황
카페에 손님, 캐시어, 바리스타가 있고 손님은 커피를 주문한다.
## 과정
1. 손님이 커피를 주문한다.
2. 캐시어가 주문을 받는다.
3. 바리스타카 커피를 제조한다.

커피를 주문하고 제조하는 과정은 <strong>역할, 책임, 협력</strong>의 세 가지 개념이 한데 어울려 조화를 이룬다.

- 역할 : 주문을 하는 손님, 주문을 받는 캐시어, 커피를 제조하는 바리스타는 각각의 역할이 존재한다. 
- 책임 : 손님, 캐시어, 바리스타는 주문한 커피를 제공하고, 받기 위해 자신이 맡은 바 책임을 다한다.
- 협력 : 커피를 주문하고, 제공 받는 모든 과정은 손님, 캐시어, 바리스타 사이의 암묵적인 협력을 말한다.

### 요청과 응답
- 요청
  - 일반적으로 하나의 문제를 해결하기 위해 다수의 사람 혹은 역할이 필요하기 때문에
  한 사람에 대한 요청이 또 다른 사람에 대한 요청을 유발하는 것이 일반적이다. 따라서 요청
  은 연쇄적으로 발생한다.
  - (손님) --커피를 주문한다--> (캐시어) --커피를 제조하라--> (바리스타)
- 응답
  - 요청을 받은 사람은 주어진 책임을 다하면서 필요한 지식이나 서비스를 제공한다.
  즉, 다른 사람의 요청에 응답한다. 요청이 연이어 발생하는 것과 마찬가지로 요청의 반대 방향으로
  응답이 연쇄적으로 전달된다.
  - (손님) <--커피 완성-- (캐시어) <--커피 완성-- (바리스타)

### 역할과 책임
- 역할
  - 사람들은 다른 사람과 협력하는 과정 속에서 특정한 역할을 부여받는다.
  - 카페에서 손님이 주문한 커피를 제조하기 위해 캐시어와 바리스타가 협력하는 과정 속에는 
  '손님', '캐시어', '바리스타'라는 역할이 존재한다.
- 책임
  - 어떤 사람이 손님이라는 역할을 맡았다면 그 사람은 커피를 주문하는 임무를 맡게 된다.
  - 캐시어라는 역할을 맡은 사람은 손님으로부터 주문을 받아야만 한다.
  - 바리스타와 역할을 맡은 사람은 주문된 커피를 제조해야 할 책임이 있다.
- 참고
  - 여러 사람이 동일한 역할을 수행할 수 있다 :
    - 손님 입장에서 자신이 주문한 커피를 마실 수만 있다면 어떤 캐시어가 주문을 받는지는
    중요하지 않다. 캐시어의 입장에서 자신이 전달한 주문 내역에 맞게 커피를 제조할 수만 있다면 어떤 
    바리스타가 커피를 제조하더라도 상관이 없다.
  - 역할은 대체 가능성을 의미한다 : 
    - 손님 입장에서 캐시어는 대체 가능하다. 즉 다른 사람이 캐시어라는 역할을 해도 그 역할을
    수행만 할 수 있다면 상관이 없다.
  - 책임을 수행하는 방법은 자율적으로 선택할 수 있다 : 
    - 요청을 받은 사람들은 요청을 처리하는 방법을 자유롭게 선택할 수 있다.
    - 커피 제조를 요청받은 바리스ㅏ는 자신만의 독특한 방법으로 커피를 제조할 수 있다.
    - 커피를 제조하라는 동일한 요청을 받더라도 바리스타의 역할을 수행하는 사람들마다 서로 다른 방식으로
    요청을 처리할 수 있다. 이처럼 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력을 <strong>다형성</strong>이라 한다. 
  - 한 사람이 동시에 여러 역할을 수행할 수 있다 : 
    - 캐시어와 바리스타라는 개별적인 역할을 이용해 협력했지만, 상황에 따라 한 사람이 캐시어와 바리스타의 역할을 동시에
    수행하는 것이 가능하다. 따라서 한 사람이 여러 역할을 수행하는 것이 가능하다.

## 객체
1. 객체는 충분히 '협력적'이어야 한다. 객체는 다른 객체의 요청에 충실히 귀 기울이고
다른 객체에게 적극적으로 도움을 요청할 정도로 열린 마음을 지녀야 한다.
   1. 여기서 충분히 협력적이라는 말은 다른 객체의 명령에 따라 행동하는 수동적인 존재를 의미
   하는 것이 아니라, 객체는 다란 객체의 요청에 응답을할 뿐이고, 어떤 식으로 응답할지는 요청 받은 객체 스스로가
   판단하고 결정한다는 것을 의미한다.
2. 객체는 '자율적'이어야 한다.
   1. 자율적이라는 의미는 자기 스스로의 원칙에 따라 어떤 일을 하거나 자기 스스로를
   통제하여 절제하는 것을 의미한다.
   2. 캐시어는 손님이 주문(요청)하면 행동을 시작하지만 그 이후에는 최대한 스스로으 판단에
   따라 결정하고 행동한다. 
   3. 손님에게 음료를 주문하는 절차나 바리스타에게 접수 내용을 전달하는 방법은
   스스로 결정한다.
 
### 행동이 상태를 결정한다
객체를 설계할 때 객체의 행동을 먼저 결정해야 되는 이유
1. 상태를 먼저 결정할 경우 캡슐화가 저해된다. 상태에 초점을 맞출 경우 상태가 객체 내부로 깔끔하게 캡슐화되지 못하고
공용 인터페이스에 그대로 노출될 확률이 있다.
2. 객체를 협력자가 아닌 고립된 섬으로 만든다. 객체가 필요한 이유는 애플리케이션 문맥 내에서 다른 객체와 협력하기 위해서인데, 
상태를 먼저 고려하는 방식은 협력이라는 문맥에서 멀리 벗어난 채 객체를 설계하게 함으로 자연스럽게 협력에 접학하지 못한 객체를 만들게
된다.
3. 객체의 재사용성이 저하된다. 객체의 재사용성은 다양한 협력에 참여할 수 있는 능력에서 나온다. 상태에 초점을 맞춘 객체는 다양한
협력에 참여하기 어렵기 때문에 재사용성이 저하될 수밖에 없다.